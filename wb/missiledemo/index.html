<!DOCTYPE html>
<html>
<head>
    <title>Missile Guidance Demo</title>
    <style>
        body { margin: 0; display: flex; font-family: Arial, sans-serif; }
        #controls { padding: 20px; }
        canvas { border: 1px solid black; }
        .slider-container { margin: 10px 0; }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <div id="controls">
        <div class="slider-container">
            <label>Missile Frequency (s): <span id="freqVal">5</span></label>
            <input type="range" id="missileFreq" min="1" max="10" value="5">
        </div>
        <div class="slider-container">
            <label>Missile Speed: <span id="missileSpeedVal">200</span></label>
            <input type="range" id="missileSpeed" min="100" max="500" value="200">
        </div>
        <div class="slider-container">
            <label>Jet Speed: <span id="jetSpeedVal">150</span></label>
            <input type="range" id="jetSpeed" min="50" max="300" value="150">
        </div>
        <p>Press 'P' to Start/Pause</p>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const controls = {
            missileFreq: document.getElementById('missileFreq'),
            missileSpeed: document.getElementById('missileSpeed'),
            jetSpeed: document.getElementById('jetSpeed')
        };

        // Display initial slider values
        document.getElementById('freqVal').textContent = controls.missileFreq.value;
        document.getElementById('missileSpeedVal').textContent = controls.missileSpeed.value;
        document.getElementById('jetSpeedVal').textContent = controls.jetSpeed.value;

        // Game objects
        const launcher = { x: canvas.width/2, y: canvas.height - 20 };
        let jet = { x: canvas.width/2, y: canvas.height/2, speed: 150 };
        let missiles = [];
        let lastMissileTime = 0;
        let isRunning = false;
        let mouseX = canvas.width/2;
        let mouseY = canvas.height/2;

        // Update slider displays
        controls.missileFreq.oninput = () => document.getElementById('freqVal').textContent = controls.missileFreq.value;
        controls.missileSpeed.oninput = () => document.getElementById('missileSpeedVal').textContent = controls.missileSpeed.value;
        controls.jetSpeed.oninput = () => {
            document.getElementById('jetSpeedVal').textContent = controls.jetSpeed.value;
            jet.speed = parseInt(controls.jetSpeed.value);
        };

        // Mouse movement
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            mouseX = e.clientX - rect.left;
            mouseY = e.clientY - rect.top;
        });

        // Pause/Play
        document.addEventListener('keydown', (e) => {
            if (e.key === 'p' || e.key === 'P') {
                isRunning = !isRunning;
                if (isRunning) animate();
            }
        });

        class Missile {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.speed = parseInt(controls.missileSpeed.value);
                this.width = 4;
                this.height = 12;
            }

            update(targetX, targetY, dt) {
                const dx = targetX - this.x;
                const dy = targetY - this.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance > 0) {
                    const velocityX = (dx / distance) * this.speed * dt;
                    const velocityY = (dy / distance) * this.speed * dt;
                    this.x += velocityX;
                    this.y += velocityY;
                }
            }

            draw() {
                ctx.fillStyle = 'red';
                ctx.fillRect(this.x - this.width/2, this.y - this.height/2, this.width, this.height);
            }
        }

        function drawScene() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw launcher (black triangle)
            ctx.fillStyle = 'black';
            ctx.beginPath();
            ctx.moveTo(launcher.x - 15, launcher.y);
            ctx.lineTo(launcher.x + 15, launcher.y);
            ctx.lineTo(launcher.x, launcher.y - 20);
            ctx.fill();

            // Draw jet (green dot)
            ctx.fillStyle = 'green';
            ctx.beginPath();
            ctx.arc(jet.x, jet.y, 5, 0, Math.PI * 2);
            ctx.fill();

            // Draw missiles
            missiles.forEach(missile => missile.draw());
        }

        function update(dt) {
            // Jet movement towards mouse
            const dx = mouseX - jet.x;
            const dy = mouseY - jet.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            if (distance > 5) {
                const velocityX = (dx / distance) * jet.speed * dt;
                const velocityY = (dy / distance) * jet.speed * dt;
                jet.x += velocityX;
                jet.y += velocityY;
            }

            // Missile launch
            const currentTime = performance.now();
            if (currentTime - lastMissileTime > controls.missileFreq.value * 1000) {
                missiles.push(new Missile(launcher.x, launcher.y));
                lastMissileTime = currentTime;
            }

            // Update missiles
            missiles = missiles.filter(m => m.y > 0 && m.y < canvas.height && m.x > 0 && m.x < canvas.width);
            missiles.forEach(missile => missile.update(jet.x, jet.y, dt));
        }

        let lastTime = 0;
        function animate(timestamp = 0) {
            if (!isRunning) return;

            const dt = (timestamp - lastTime) / 1000;
            lastTime = timestamp;

            update(dt);
            drawScene();
            requestAnimationFrame(animate);
        }

        // Initial draw
        drawScene();
    </script>
</body>
</html>
